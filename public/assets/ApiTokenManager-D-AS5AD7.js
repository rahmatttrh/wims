import{T as j}from"./Input-Dp9i-tt6.js";import{T as L}from"./Label-BFNS-ixp.js";import{T as N}from"./Button-feziRQJJ.js";import{T as U}from"./Checkbox-DL9ICh3J.js";import{T as z}from"./InputError-IXNDXV76.js";import{T as E}from"./DialogModal-sgVcSADN.js";import{T as W}from"./FormSection-Bw8u_PxU.js";import{T as Y}from"./DangerButton-Ctow7aOW.js";import{T as q}from"./ActionMessage-pdJfik6o.js";import{T as G}from"./ActionSection-CWyfgT6A.js";import{T as H}from"./SectionBorder-DAP8wmVQ.js";import{T as J}from"./SecondaryButton-E38dtDD9.js";import{M as K}from"./Modal-vEUc-xTy.js";import{_ as F,r as l,d as O,o as a,e as t,b as n,f as _,c as m,g as i,a as k,h as r,n as v,F as b,i as y,t as g}from"./app-CmanO5vD.js";import"./SectionTitle-CsKWWg1N.js";const Q={emits:["close"],components:{Modal:K},props:{show:{default:!1},maxWidth:{default:"2xl"},closeable:{default:!0}},methods:{close(){this.$emit("close")}}},R={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},X={class:"sm:flex sm:items-start"},Z={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},$={class:"text-lg"},ee={class:"mt-2"},oe={class:"px-6 py-4 bg-gray-100 text-right sm:rounded-b-lg"};function te(c,e,d,C,o,p){const f=l("modal");return a(),O(f,{show:d.show,"max-width":d.maxWidth,closeable:d.closeable,onClose:p.close},{default:t(()=>[n("div",R,[n("div",X,[e[0]||(e[0]=n("div",{class:"mx-auto shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[n("svg",{class:"h-6 w-6 text-red-600",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),n("div",Z,[n("h3",$,[_(c.$slots,"title")]),n("div",ee,[_(c.$slots,"content")])])])]),n("div",oe,[_(c.$slots,"footer")])]),_:3},8,["show","max-width","closeable","onClose"])}const se=F(Q,[["render",te]]),ne={components:{TecInput:j,TecLabel:L,TecButton:N,TecCheckbox:U,TecInputError:z,TecDialogModal:E,TecFormSection:W,TecDangerButton:Y,TecActionMessage:q,TecActionSection:G,TecSectionBorder:H,TecSecondaryButton:J,TecConfirmationModal:se},props:["tokens","availablePermissions","defaultPermissions"],data(){return{createApiTokenForm:this.$inertia.form({name:"",permissions:this.defaultPermissions}),updateApiTokenForm:this.$inertia.form({permissions:[]}),deleteApiTokenForm:this.$inertia.form(),displayingToken:!1,managingPermissionsFor:null,apiTokenBeingDeleted:null}},methods:{createApiToken(){this.createApiTokenForm.post(route("api-tokens.store"),{preserveScroll:!0,onSuccess:()=>{this.displayingToken=!0,this.createApiTokenForm.reset()}})},manageApiTokenPermissions(c){this.updateApiTokenForm.permissions=c.abilities,this.managingPermissionsFor=c},updateApiToken(){this.updateApiTokenForm.put(route("api-tokens.update",this.managingPermissionsFor),{preserveScroll:!0,preserveState:!0,onSuccess:()=>this.managingPermissionsFor=null})},confirmApiTokenDeletion(c){this.apiTokenBeingDeleted=c},deleteApiToken(){this.deleteApiTokenForm.delete(route("api-tokens.destroy",this.apiTokenBeingDeleted),{preserveScroll:!0,preserveState:!0,onSuccess:()=>this.apiTokenBeingDeleted=null})}}},ie={class:"col-span-6 sm:col-span-4"},re={key:0,class:"col-span-6"},le={class:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4"},ae={class:"flex items-center"},me={class:"ml-2 text-gray-600"},ce={key:0},de={class:"mt-10 sm:mt-0"},pe={class:"space-y-6"},ue={class:"flex items-center"},ke={key:0,class:"text-gray-400"},ge=["onClick"],fe=["onClick"],Te={key:0,class:"mt-4 bg-gray-100 px-4 py-2 rounded-sm font-mono text-gray-500"},_e={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ve={class:"flex items-center"},be={class:"ml-2 text-gray-600"};function ye(c,e,d,C,o,p){const f=l("tec-label"),P=l("tec-input"),w=l("tec-input-error"),A=l("tec-checkbox"),S=l("tec-action-message"),h=l("tec-button"),B=l("tec-form-section"),D=l("tec-section-border"),I=l("tec-action-section"),T=l("tec-secondary-button"),x=l("tec-dialog-modal"),M=l("tec-danger-button"),V=l("tec-confirmation-modal");return a(),m("div",null,[i(B,{onSubmitted:p.createApiToken},{title:t(()=>[...e[9]||(e[9]=[r(" Create API Token ",-1)])]),description:t(()=>[...e[10]||(e[10]=[r(" API tokens allow third-party services to authenticate with our application on your behalf. ",-1)])]),form:t(()=>[n("div",ie,[i(f,{for:"name",value:"Name"}),i(P,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:o.createApiTokenForm.name,"onUpdate:modelValue":e[0]||(e[0]=s=>o.createApiTokenForm.name=s),autofocus:""},null,8,["modelValue"]),i(w,{message:o.createApiTokenForm.errors.name,class:"mt-2"},null,8,["message"])]),d.availablePermissions.length>0?(a(),m("div",re,[i(f,{for:"permissions",value:"Permissions"}),n("div",le,[(a(!0),m(b,null,y(d.availablePermissions,s=>(a(),m("div",{key:s},[n("label",ae,[i(A,{value:s,checked:o.createApiTokenForm.permissions,"onUpdate:checked":e[1]||(e[1]=u=>o.createApiTokenForm.permissions=u)},null,8,["value","checked"]),n("span",me,g(s),1)])]))),128))])])):k("",!0)]),actions:t(()=>[i(S,{on:o.createApiTokenForm.recentlySuccessful,class:"mr-3"},{default:t(()=>[...e[11]||(e[11]=[r(" Created. ",-1)])]),_:1},8,["on"]),i(h,{class:v({"opacity-25":o.createApiTokenForm.processing}),disabled:o.createApiTokenForm.processing},{default:t(()=>[...e[12]||(e[12]=[r(" Create ",-1)])]),_:1},8,["class","disabled"])]),_:1},8,["onSubmitted"]),d.tokens.length>0?(a(),m("div",ce,[i(D),n("div",de,[i(I,null,{title:t(()=>[...e[13]||(e[13]=[r(" Manage API Tokens ",-1)])]),description:t(()=>[...e[14]||(e[14]=[r(" You may delete any of your existing tokens if they are no longer needed. ",-1)])]),content:t(()=>[n("div",pe,[(a(!0),m(b,null,y(d.tokens,s=>(a(),m("div",{class:"flex items-center justify-between",key:s.id},[n("div",null,g(s.name),1),n("div",ue,[s.last_used_ago?(a(),m("div",ke,"Last used "+g(s.last_used_ago),1)):k("",!0),d.availablePermissions.length>0?(a(),m("button",{key:1,class:"cursor-pointer ml-6 text-gray-400 underline",onClick:u=>p.manageApiTokenPermissions(s)}," Permissions ",8,ge)):k("",!0),n("button",{class:"cursor-pointer ml-6 text-red-500",onClick:u=>p.confirmApiTokenDeletion(s)},"Delete",8,fe)])]))),128))])]),_:1})])])):k("",!0),i(x,{show:o.displayingToken,onClose:e[3]||(e[3]=s=>o.displayingToken=!1)},{title:t(()=>[...e[15]||(e[15]=[r(" API Token ",-1)])]),content:t(()=>[e[16]||(e[16]=n("div",null,"Please copy your new API token. For your security, it won't be shown again.",-1)),c.$page.props.jetstream.flash.token?(a(),m("div",Te,g(c.$page.props.jetstream.flash.token),1)):k("",!0)]),footer:t(()=>[i(T,{onClick:e[2]||(e[2]=s=>o.displayingToken=!1)},{default:t(()=>[...e[17]||(e[17]=[r(" Close ",-1)])]),_:1})]),_:1},8,["show"]),i(x,{show:o.managingPermissionsFor,onClose:e[6]||(e[6]=s=>o.managingPermissionsFor=null)},{title:t(()=>[...e[18]||(e[18]=[r(" API Token Permissions ",-1)])]),content:t(()=>[n("div",_e,[(a(!0),m(b,null,y(d.availablePermissions,s=>(a(),m("div",{key:s},[n("label",ve,[i(A,{value:s,checked:o.updateApiTokenForm.permissions,"onUpdate:checked":e[4]||(e[4]=u=>o.updateApiTokenForm.permissions=u)},null,8,["value","checked"]),n("span",be,g(s),1)])]))),128))])]),footer:t(()=>[i(T,{onClick:e[5]||(e[5]=s=>o.managingPermissionsFor=null)},{default:t(()=>[...e[19]||(e[19]=[r(" Cancel ",-1)])]),_:1}),i(h,{class:v(["ml-2",{"opacity-25":o.updateApiTokenForm.processing}]),onClick:p.updateApiToken,disabled:o.updateApiTokenForm.processing},{default:t(()=>[...e[20]||(e[20]=[r(" Save ",-1)])]),_:1},8,["onClick","class","disabled"])]),_:1},8,["show"]),i(V,{show:o.apiTokenBeingDeleted,onClose:e[8]||(e[8]=s=>o.apiTokenBeingDeleted=null)},{title:t(()=>[...e[21]||(e[21]=[r(" Delete API Token ",-1)])]),content:t(()=>[...e[22]||(e[22]=[r(" Are you sure you would like to delete this API token? ",-1)])]),footer:t(()=>[i(T,{onClick:e[7]||(e[7]=s=>o.apiTokenBeingDeleted=null)},{default:t(()=>[...e[23]||(e[23]=[r(" Cancel ",-1)])]),_:1}),i(M,{class:v(["ml-2",{"opacity-25":o.deleteApiTokenForm.processing}]),onClick:p.deleteApiToken,disabled:o.deleteApiTokenForm.processing},{default:t(()=>[...e[24]||(e[24]=[r(" Delete ",-1)])]),_:1},8,["onClick","class","disabled"])]),_:1},8,["show"])])}const Ne=F(ne,[["render",ye]]);export{Ne as default};
