import{D}from"./Dialog-Dk4S7JDy.js";import{C as M}from"./CheckBox-BvIjEx6v.js";import{T as A}from"./TextInput-DMi2dCla.js";import{F}from"./FileInput-DnWFVuur.js";import{A as B}from"./AdminLayout-CZVbxH_w.js";import{_ as R}from"./AutoComplete-DCdUm1YR.js";import{L}from"./LoadingButton-DJovEPtR.js";import{T as N}from"./InputError-IXNDXV76.js";import{T as E}from"./DialogModal-sgVcSADN.js";import{T as I}from"./TrashedMessage-CoOCaDQW.js";import{T as j}from"./FormSection-Bw8u_PxU.js";import{T as z}from"./DangerButton-Ctow7aOW.js";import{T as O}from"./SectionTitle-CsKWWg1N.js";import{T as W}from"./ActionMessage-pdJfik6o.js";import{T as q}from"./SecondaryButton-E38dtDD9.js";import{_ as G,r as a,d as h,o as n,e as u,g as s,b as d,c,a as b,t as m,n as H,h as f,F as y,i as J}from"./app-CmanO5vD.js";import"./Checkbox-DL9ICh3J.js";import"./v4-BKrj-4V8.js";import"./Label-BFNS-ixp.js";import"./Input-Dp9i-tt6.js";import"./Modal-vEUc-xTy.js";import"./DropdownLink-DLgJUFVy.js";import"./ApplicationLogo-C9LXsB4R.js";import"./ApplicationMark-CtaHwZ2O.js";const K={props:["edit","roles","warehouses"],components:{Dialog:D,CheckBox:M,FileInput:F,TextInput:A,AdminLayout:B,AutoComplete:R,LoadingButton:L,TecInputError:N,TecDialogModal:E,TecFormSection:j,TecDangerButton:z,TrashedMessage:I,TecSectionTitle:O,TecActionMessage:W,TecSecondaryButton:q},data(){return{confirm:!1,disabling:!1,permanent:!1,restoreConf:!1,form:this.$inertia.form({_method:this.edit?"put":"post",photo:null,password:null,password_confirmation:null,name:this.edit?this.edit.name:null,email:this.edit?this.edit.email:null,username:this.edit?this.edit.username:null,view_all:this.edit?this.edit.view_all==1:!1,edit_all:this.edit?this.edit.edit_all==1:!1,warehouse_id:this.edit?this.edit.warehouse_id:null,roles:this.edit?this.edit.roles.map(e=>e.name):[]})}},methods:{update(){this.form.post(this.edit?this.route("users.update",this.edit.id):this.route("users.store"),{preserveScroll:!0,onSuccess:()=>this.form.reset("password","password_confirmation","photo")})},destroy(){this.confirm=!0},restore(){this.restoreConf=!0},deletePermanently(){this.permanent=!0},restoreUser(){this.$inertia.put(this.route("users.restore",this.edit.id),{onSuccess:()=>this.restoreConf=!1})},deleteUser(){this.form.delete(route("users.destroy",this.edit.id),{onSuccess:()=>this.closeModal()})},deleteUserPermanently(){this.form.delete(route("users.destroy.permanently",this.edit.id),{onSuccess:()=>this.closeModal()})},closeRestoreModal(){this.restoreConf=!1},closePermanentModal(){this.permanent=!1},closeModal(){this.confirm=!1},disableTwoFactorAuthentication(){this.disabling=!0,this.$inertia.delete(route("users.disable.2fa",this.edit.id),{preserveScroll:!0,onSuccess:()=>this.disabling=!1})}}},Q={class:"flex items-center"},X=["src"],Y={class:"flex flex-col gap-6"},Z={class:"flex flex-col lg:flex-row gap-6"},$={class:"flex flex-col gap-6 w-full lg:w-1/2"},ee={class:"flex flex-col gap-6 w-full lg:w-1/2"},oe={key:1,class:"flex flex-wrap items-center gap-x-6 gap-y-3"},te={class:"block w-full font-medium text-gray-700"},re={class:"font-bold"},se={class:"flex flex-col gap-6"},le={class:"flex flex-col lg:flex-row gap-6"},ne={class:"w-full flex items-center justify-between"},ie={key:0},ae={key:1},de={class:"flex items-center"};function me(e,t,l,ue,o,i){const _=a("Link"),k=a("trashed-message"),p=a("text-input"),v=a("auto-complete"),g=a("check-box"),U=a("tec-input-error"),V=a("tec-danger-button"),T=a("tec-action-message"),C=a("loading-button"),S=a("tec-form-section"),w=a("Dialog"),x=a("admin-layout");return n(),h(x,{title:e.$t(l.edit?"edit_x":"create_x",{x:e.$t("User")})},{default:u(()=>[s(S,{onSubmitted:i.update},{title:u(()=>[d("div",Q,[l.edit?(n(),c(y,{key:0},[s(_,{class:"text-blue-600 hover:text-blue-700",href:e.route("users.index")},{default:u(()=>[f(m(e.$t("Users")),1)]),_:1},8,["href"]),t[12]||(t[12]=d("span",{class:"text-blue-600 font-medium mx-2"},"/",-1)),l.edit.photo?(n(),c("img",{key:0,class:"block w-6 h-6 rounded-full mr-2",src:l.edit.photo},null,8,X)):b("",!0),f(" "+m(l.edit.name),1)],64)):(n(),c(y,{key:1},[f(m(e.$t("create_x",{x:e.$t("User")})),1)],64))])]),description:u(()=>[f(m(l.edit?e.$t("Update the record by modifying the details in the form below"):e.$t("Please fill the form below to add new record.")),1)]),form:u(()=>[l.edit&&l.edit.deleted_at?(n(),h(k,{key:0,class:"mb-6",onRestore:i.restore},{default:u(()=>[f(m(e.$t("This user has been deleted.")),1)]),_:1},8,["onRestore"])):b("",!0),d("div",Y,[d("div",Z,[d("div",$,[s(p,{modelValue:o.form.name,"onUpdate:modelValue":t[0]||(t[0]=r=>o.form.name=r),error:e.$page.props.errors.name,label:e.$t("Name")},null,8,["modelValue","error","label"]),s(p,{modelValue:o.form.username,"onUpdate:modelValue":t[1]||(t[1]=r=>o.form.username=r),error:e.$page.props.errors.username,label:e.$t("Username")},null,8,["modelValue","error","label"]),s(p,{type:"email",modelValue:o.form.email,"onUpdate:modelValue":t[2]||(t[2]=r=>o.form.email=r),error:e.$page.props.errors.email,label:e.$t("Email")},null,8,["modelValue","error","label"]),s(p,{modelValue:o.form.phone,"onUpdate:modelValue":t[3]||(t[3]=r=>o.form.phone=r),error:e.$page.props.errors.phone,label:e.$t("Phone")},null,8,["modelValue","error","label"])]),d("div",ee,[s(p,{id:"password",type:"password",label:e.$t("Password"),modelValue:o.form.password,"onUpdate:modelValue":t[4]||(t[4]=r=>o.form.password=r),error:e.$page.props.errors.password},null,8,["label","modelValue","error"]),s(p,{type:"password",id:"password_confirmation",label:e.$t("Confirm Password"),modelValue:o.form.password_confirmation,"onUpdate:modelValue":t[5]||(t[5]=r=>o.form.password_confirmation=r),error:e.$page.props.errors.password_confirmation},null,8,["label","modelValue","error"]),s(v,{json:"",id:"warehouse",label:e.$t("Warehouse"),suggestions:l.warehouses,modelValue:o.form.warehouse_id,"onUpdate:modelValue":t[6]||(t[6]=r=>o.form.warehouse_id=r),error:e.$page.props.errors.warehouse_id},null,8,["label","suggestions","modelValue","error"])])])]),l.roles&&l.roles.length?(n(),c("div",oe,[d("label",te,m(e.$t("Roles")),1),(n(!0),c(y,null,J(l.roles,r=>(n(),h(g,{key:r.name,id:r.name,value:r.name,label:r.name,checked:o.form.roles,"onUpdate:checked":t[7]||(t[7]=P=>o.form.roles=P),error:e.$page.props.errors.roles},null,8,["id","value","label","checked","error"]))),128)),e.$page.props.errors.roles?(n(),h(U,{key:0,message:e.$page.props.errors.roles,class:"w-full mt-1"},null,8,["message"])):b("",!0)])):b("",!0),d("h1",re,m(e.$t("Permissions")),1),d("div",se,[d("div",le,[s(g,{id:"view_all",checked:o.form.view_all,"onUpdate:checked":t[8]||(t[8]=r=>o.form.view_all=r),label:e.$t("Can view all record")},null,8,["checked","label"]),s(g,{id:"edit_all",checked:o.form.edit_all,"onUpdate:checked":t[9]||(t[9]=r=>o.form.edit_all=r),label:e.$t("Can edit all record")},null,8,["checked","label"])])])]),actions:u(()=>[d("div",ne,[l.edit?(n(),c("span",ie,[l.edit.deleted_at?(n(),c("button",{key:1,type:"button",onClick:t[11]||(t[11]=(...r)=>i.deletePermanently&&i.deletePermanently(...r)),class:"text-red-600 px-4 py-2 rounded-sm border-2 border-transparent hover:border-gray-300 focus:outline-hidden focus:border-gray-300"},m(e.$t("delete_x",{x:e.$t("Permanently")})),1)):(n(),c("button",{key:0,type:"button",onClick:t[10]||(t[10]=(...r)=>i.destroy&&i.destroy(...r)),class:"text-red-600 px-4 py-2 rounded-sm border-2 border-transparent hover:border-gray-300 focus:outline-hidden focus:border-gray-300"},m(e.$t("delete_x",{x:e.$t("User")})),1)),l.edit.two_factor_enabled?(n(),h(V,{key:2,class:H(["ml-2",{"opacity-25":o.disabling}]),disabled:o.disabling,onClick:i.disableTwoFactorAuthentication},{default:u(()=>[f(m(e.$t("Disable 2FA")),1)]),_:1},8,["disabled","class","onClick"])):b("",!0)])):(n(),c("div",ae)),d("div",de,[s(T,{on:o.form.recentlySuccessful,class:"mx-3"},{default:u(()=>[f(m(e.$t("Saved.")),1)]),_:1},8,["on"]),s(C,{type:"submit",loading:o.form.processing,disabled:o.form.processing},{default:u(()=>[f(m(e.$t("Save")),1)]),_:1},8,["loading","disabled"])])])]),_:1},8,["onSubmitted"]),s(w,{"max-width":"md",show:o.permanent,"action-type":"delete",title:"Delete User?",close:i.closePermanentModal,action:i.deleteUserPermanently,"action-text":"Delete Permanently",content:`<p class='mb-2'>${e.$t("Are you sure you want to delete the record permanently?")}</p>
        <p>${e.$t("Once deleted, all of its resources and data will be permanently deleted.")}</p>`},null,8,["show","close","action","content"]),s(w,{show:o.confirm,close:i.closeModal,action:i.deleteUser,"action-type":"delete",title:"Delete User?","action-text":"Delete User",content:e.$t("Are you sure you want to delete the record?")},null,8,["show","close","action","content"]),s(w,{show:o.restoreConf,action:i.restoreUser,title:"Restore User!",close:i.closeRestoreModal,"action-text":"Restore User",content:e.$t("Are you sure you want to restore the record?")},null,8,["show","action","close","content"])]),_:1},8,["title"])}const Le=G(K,[["render",me]]);export{Le as default};
