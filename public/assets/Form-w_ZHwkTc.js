import{u as ae,j as ie,k as V,l as ne,m as de,p as ue,q as pe,s as ce,r as E,d as j,o,e as w,g as c,a as p,b as s,c as l,F as b,t as r,v as m,h as x,n as q,i as U,x as N}from"./app-CmanO5vD.js";import{S as me,_ as he}from"./SelectVariantModal-Dw3aimkX.js";import{t as ge}from"./throttle-D8AUt2bN.js";import{$ as fe}from"./helpers-ugK6HtQT.js";import{D as I}from"./Dialog-Dk4S7JDy.js";import{C as ye}from"./CheckBox-BvIjEx6v.js";import{T as $}from"./TextInput-DMi2dCla.js";import{S as D}from"./SelectInput-BdLKWJYF.js";import{A as ve}from"./AdminLayout-CZVbxH_w.js";import{_ as P}from"./AutoComplete-DCdUm1YR.js";import{L as we}from"./LoadingButton-DJovEPtR.js";import{T as be}from"./TextareaInput-DH2izHKc.js";import{T as _e}from"./FormSection-Bw8u_PxU.js";import{T as $e}from"./TrashedMessage-CoOCaDQW.js";import{T as ke}from"./ActionMessage-pdJfik6o.js";import"./Modal-vEUc-xTy.js";import"./DialogModal-sgVcSADN.js";import"./DangerButton-Ctow7aOW.js";import"./SecondaryButton-E38dtDD9.js";import"./Checkbox-DL9ICh3J.js";import"./InputError-IXNDXV76.js";import"./v4-BKrj-4V8.js";import"./Label-BFNS-ixp.js";import"./Input-Dp9i-tt6.js";import"./DropdownLink-DLgJUFVy.js";import"./ApplicationLogo-C9LXsB4R.js";import"./ApplicationMark-CtaHwZ2O.js";import"./SectionTitle-CsKWWg1N.js";const Ve={key:0,class:"flex items-center"},xe={class:"flex flex-col gap-6"},qe={class:"flex flex-col lg:flex-row gap-6"},Ue={class:"flex flex-col gap-6 w-full lg:w-1/2"},je={class:"flex flex-col gap-6 w-full lg:w-1/2"},Ae={class:"p-4 md:px-6 bg-gray-50 -mx-4 md:-mx-6"},Se={key:0,class:"pt-4"},Te={key:0,class:"text-red-600"},Ce={key:1},De=["innerHTML"],Fe={class:"w-full block sm:flex items-center justify-stretch gap-4"},ze={class:"mt-4 grow flex items-center gap-4"},Le={class:"w-1/2"},Me=["value"],Ie=["value"],Pe={key:1,class:"w-full block sm:flex items-center justify-stretch gap-4"},We={class:"mt-4 grow flex items-center gap-4"},Be={class:"w-1/2"},Re=["value"],Ee=["value"],Ne={class:"mt-4"},He={key:0,class:"text-red-600 pt-1 rounded-md"},Oe={key:1,class:"text-red-600 pt-1 rounded-md"},Qe={key:2,class:"text-red-600 pt-1 rounded-md"},Je={key:1,class:"bg-white mt-4 rounded-md shadow-sm overflow-x-auto"},Ye={class:"w-full"},Ge={class:"text-left font-bold"},Ke={class:"px-2 lg:pl-6 py-4 w-4"},Xe={class:"px-2 lg:px-6 py-4"},Ze={key:0},et={class:"px-2 lg:px-6 py-4 text-center w-32 xl:w-56"},tt={class:"px-2 lg:px-6 py-4 text-center w-32 xl:w-56"},st={key:0,class:"group"},ot={class:"border-t",colspan:"4"},lt={class:"px-2 lg:px-6 py-2 focus:text-indigo-500"},rt={class:"w-full lg:w-auto font-bold"},at={class:"text-base"},it={class:"px-2 lg:pl-6 pb-2 focus:text-indigo-500"},nt=["onClick"],dt={class:"px-2 lg:px-6 pb-2 focus:text-indigo-500"},ut=["innerHTML"],pt={key:0,class:"px-2 xl:px-6 pb-2 text-right"},ct={class:"px-2 xl:px-6 pb-2 text-right"},mt={key:0,class:"px-2 xl:px-6 pb-2 text-right"},ht=["value"],gt=["value"],ft={colspan:"4"},yt={class:"px-2 lg:px-6 pb-2 focus:text-indigo-500"},vt={key:0,class:"text-red-600 pt-1 rounded-md"},wt={key:1,class:"text-red-600 pt-1 rounded-md"},bt={key:2,class:"text-red-600 pt-1 rounded-md"},_t={key:1},$t={class:"border-t"},kt={class:"px-2 lg:pl-6 py-2 focus:text-indigo-500"},Vt=["onClick"],xt={class:"border-t"},qt={class:"px-2 lg:px-6 py-2 focus:text-indigo-500"},Ut={class:"w-full lg:w-auto"},jt={class:"text-base"},At={key:0,class:"text-red-600 pt-1 rounded-md"},St={key:1,class:"text-red-600 pt-1 rounded-md"},Tt={key:2,class:"text-red-600 pt-1 rounded-md"},Ct={class:"border-t"},Dt={key:0,class:"px-2 xl:px-6 py-2 text-right"},Ft={class:"border-t"},zt={class:"px-2 xl:px-6 py-2 text-right"},Lt={class:"border-t"},Mt={key:0,class:"px-2 xl:px-6 py-2 text-right"},It=["value"],Pt=["value"],Wt={key:1},Bt={key:0,class:"text-red-600"},Rt={for:"file-upload",class:"font-medium text-gray-700"},Et={key:0,class:"print:hidden py-4 w-full"},Nt={role:"list",class:"border border-gray-200 rounded-md divide-y divide-gray-200"},Ht={class:"w-0 flex-1 flex items-center"},Ot={class:"ml-2 flex-1 w-0 truncate"},Qt={class:"ml-4 shrink-0 flex items-center gap-4"},Jt=["href"],Yt=["onClick"],Gt={class:"space-y-1 text-center"},Kt={class:"flex items-center justify-center text-gray-600"},Xt={for:"file-upload",class:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-hidden focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-gray-300"},Zt={key:0,class:"font-semibold"},es={key:1,class:"font-semibold"},ts={class:"pl-1"},ss={class:"text-sm text-gray-700"},os={key:0,class:"inline-block pt-4"},ls={class:"px-3 py-1 rounded-md border font-bold text-base"},rs={key:1,class:"mt-4 pt-2 text-red-600 rounded-md"},as={class:"w-full flex items-center justify-between"},is={key:1},ns={class:"flex items-center"},Ms={__name:"Form",props:{edit:Object,contacts:Array,warehouses:Array},setup(g){const y=ae(),{t:H}=ie(),h=g,S=V([]),F=V(null),z=V(!1);V(!1);const L=V(!1),T=V(!1),f=V(null),A=V(!1),C=V(null),W=V(window.innerWidth),O=ne(()=>W.value<1024);de(A,e=>{C.value=null,document.body.style.overflow=e?"hidden":"auto"});const u=ue({_method:h.edit?"PUT":"POST",attachments:null,type:h.edit?h.edit.type:"Damage",details:h.edit?h.edit.details:null,draft:h.edit?h.edit.draft==1:!1,reference:h.edit?h.edit.reference:null,warehouse_id:h.edit?h.edit.warehouse_id:null,date:h.edit?h.edit.date_raw:fe(new Date),items:h.edit&&h.edit.items&&h.edit.items.length?h.edit.items.map(e=>({...e.item,id:e.id,details:"",item_id:e.item_id,unit_id:e.unit_id,weight:parseFloat(e.weight),quantity:parseFloat(e.quantity),old_quantity:parseFloat(e.quantity),selected:{serials:[],variations:e.variations.map(d=>({...d,weight:parseFloat(d.pivot.weight),unit_id:d.pivot.unit_id||e.unit_id,quantity:parseFloat(d.pivot.quantity),old_quantity:parseFloat(d.pivot.quantity)}))}})):[]});pe(()=>{!h.edit&&!y.props.auth.user?.roles.find(e=>e.name=="Super Admin")&&(u.warehouse_id=y.props.auth.user.warehouse_id),window.addEventListener("resize",B)}),ce(()=>{window.removeEventListener("resize",B)});const B=ge(()=>W.value=window.innerWidth,250),R=(e,a,d)=>{d?(e.selected.variations.splice(d,1),e.selected.variations.length<1&&(e.selected.variations=[],u.items.splice(a,1))):u.items.splice(a,1)},Q=e=>{let a=null;if(typeof e=="object"&&e!==null?a=f.value.variations.find(d=>he(d.meta,e)):a=f.value.variations.find(d=>d.sku==e),console.log(f.value),a){console.log(f.value),f.value.selected||(f.value.selected={variations:[],serials:[]}),a.quantity=1,a.unit_id=f.value.unit_id,a.weight=y.props.settings.track_weight==1&&f.value.track_weight==1?1:0;let d=u.items.find(v=>v.item_id==f.value.id);if(d){d.quantity+=1,d.weight+=y.props.settings.track_weight==1&&d.track_weight==1?1:0;let v=d.selected.variations.length?d.selected.variations.find(t=>t.id==a.id):null;v?(v.quantity+=1,v.weight+=y.props.settings.track_weight==1&&d.track_weight==1?1:0):d.selected.variations.push(a)}else f.value.selected.variations=[{...a}],u.items.push({...f.value,quantity:1,unit_id:f.value.unit_id,weight:y.props.settings.track_weight==1&&f.value.track_weight==1?1:0});f.value=null,A.value=!1}else C.value=H("No match found for the item variation."),y.props.flash.error=C.value},J=e=>{if(e.item_id=e.id,e.selected=e.selected||{variations:[],serials:[]},e.has_variants&&e.variants.length>0)f.value={...e,variants:e.variants.map(a=>({...a,selected:null}))},A.value=!0;else{let a=u.items.find(d=>d.id==e.id);a?(a.quantity+=1,a.weight+=y.props.settings.track_weight==1&&a.track_weight==1?1:0):u.items.push({...e,quantity:1,unit_id:e.unit_id,weight:e.track_weight==1?1:0})}},Y=e=>{Array.from(e.target.files).forEach(a=>S.value.push(a.name))};function G(){F.value&&(u.attachments=F.value.files),u.transform(e=>({...e,items:e.items.map(a=>({...a,unit:null,variants:null,variations:null,unit_id:a.unit_id||null,selected:{serials:a.selected.serials&&a.selected.serials.length?a.selected.serials.map(d=>d.id):[],variations:a.selected.variations.map(d=>{let v={};return v[d.id]={weight:d.weight,variation_id:d.id,quantity:d.quantity,unit_id:d.unit_id||null,old_quantity:d.old_quantity}})}}))})).post(h.edit?route("adjustments.update",h.edit.id):route("adjustments.store"),{preserveScroll:!0})}function K(){z.value=!0}function X(){u.delete(route("adjustments.destroy",h.edit.id),{onSuccess:()=>M()})}function M(){z.value=!1}function Z(){T.value=!0}function ee(){N.put(route("adjustments.restore",h.edit.id),{onSuccess:()=>T.value=!1})}function te(){T.value=!1}function se(){L.value=!0}function oe(){u.delete(route("adjustments.destroy.permanently",h.edit.id),{onSuccess:()=>M()})}function le(){L.value=!1}function re(e){N.delete(route("media.delete",e))}return(e,a)=>{const d=E("Link"),v=E("icons");return o(),j(ve,{title:e.$t(g.edit?"edit_x":"create_x",{x:e.$t("Adjustment")})},{default:w(()=>[c(_e,{onSubmitted:G},{title:w(()=>[g.edit?(o(),l("div",Ve,[c(d,{class:"text-blue-600 hover:text-blue-700",href:e.route("adjustments.index")},{default:w(()=>[x(r(e.$t("Adjustments")),1)]),_:1},8,["href"]),a[7]||(a[7]=s("span",{class:"text-blue-600 font-medium mx-2"},"/",-1)),x(" "+r(e.$t("Adjustment"))+" ("+r(g.edit.reference)+") ",1)])):(o(),l(b,{key:1},[x(r(e.$t("create_x",{x:e.$t("Adjustment")})),1)],64))]),description:w(()=>[x(r(g.edit?e.$t("Update the record by modifying the details in the form below"):e.$t("Please fill the form below to add new record.")),1)]),form:w(()=>[g.edit&&g.edit.deleted_at?(o(),j($e,{key:0,class:"mb-6",onRestore:Z},{default:w(()=>[x(r(e.$t("This record has been deleted.")),1)]),_:1})):p("",!0),s("div",xe,[s("div",qe,[s("div",Ue,[c($,{type:"date",modelValue:m(u).date,"onUpdate:modelValue":a[0]||(a[0]=t=>m(u).date=t),error:e.$page.props.errors.date,label:e.$t("Date")},null,8,["modelValue","error","label"]),c($,{modelValue:m(u).reference,"onUpdate:modelValue":a[1]||(a[1]=t=>m(u).reference=t),error:e.$page.props.errors.reference,label:e.$t("Reference")},null,8,["modelValue","error","label"])]),s("div",je,[c(P,{id:"type",label:e.$t("Type"),modelValue:m(u).type,"onUpdate:modelValue":a[2]||(a[2]=t=>m(u).type=t),error:e.$page.props.errors.type,suggestions:[{value:"Damage",label:e.$t("Damage")},{value:"Addition",label:e.$t("Addition")},{value:"Subtraction",label:e.$t("Subtraction")}]},null,8,["label","modelValue","error","suggestions"]),!e.$super&&e.$user.warehouse_id?(o(),j($,{key:0,disabled:"",readonly:"",label:e.$t("Warehouse"),modelValue:g.warehouses.find(t=>t.id==e.$user.warehouse_id)?.name},null,8,["label","modelValue"])):(o(),j(P,{key:1,id:"warehouse",label:e.$t("Warehouse"),suggestions:g.warehouses,modelValue:m(u).warehouse_id,"onUpdate:modelValue":a[3]||(a[3]=t=>m(u).warehouse_id=t),error:e.$page.props.errors.warehouse_id},null,8,["label","suggestions","modelValue","error"]))])]),s("div",Ae,[c(P,{"keep-focus":"","reset-search":"",json:!1,id:"add-item","onUpdate:modelValue":J,suggestions:e.route("items.search"),placeholder:e.$t("Scan barcode or search items"),defaultText:e.$t("Scan barcode or search items for next")},null,8,["suggestions","placeholder","defaultText"]),O.value?(o(),l("div",Se,[m(u).items.length===0?(o(),l("div",{key:0,class:q({"-mx-4 md:-mx-6 -mb-4 p-4 bg-red-100 border-red-600":e.$page.props.errors.items})},[x(r(e.$t("Add item to the list by search or scan barcode"))+" ",1),e.$page.props.errors.items?(o(),l("div",Te,r(e.$page.props.errors.items),1)):p("",!0)],2)):(o(),l("div",Ce,[(o(!0),l(b,null,U(m(u).items,(t,i)=>(o(),l("div",{key:t.id,class:q(["-mx-4 -mb-6 p-4 md:-mx-6 border-b border-blue-100",{"bg-blue-50":i%2==0,"bg-indigo-50":i%2!=0,error:e.$page.props.errors["items."+i+".variation_id"]||e.$page.props.errors["items."+i+".quantity"]||e.$page.props.errors["items."+i+".weight"]}])},[s("h4",{class:q(["text-base font-bold",{"-mb-4":t.has_variants}])},r(t.name)+" ("+r(t.code)+")",3),t.has_variants&&t.variants.length&&t.selected.variations?(o(!0),l(b,{key:0},U(t.selected.variations,n=>(o(),l("div",{key:n.sku},[s("span",{class:"mt-8 block",innerHTML:e.$meta(n.meta)},null,8,De),s("div",Fe,[s("div",ze,[c($,{label:e.$t("Quantity"),type:"number",modelValue:n.quantity,"onUpdate:modelValue":_=>n.quantity=_,class:"w-1/2"},null,8,["label","modelValue","onUpdate:modelValue"]),s("div",Le,[c(D,{label:e.$t("Unit"),modelValue:n.unit_id,"onUpdate:modelValue":_=>n.unit_id=_,class:"w-full"},{default:w(()=>[s("option",{value:t.unit.id},r(t.unit.name),9,Me),t.unit.subunits&&t.unit.subunits.length?(o(!0),l(b,{key:0},U(t.unit.subunits,_=>(o(),l("option",{key:_.id,value:_.id},r(_.name),9,Ie))),128)):p("",!0)]),_:2},1032,["label","modelValue","onUpdate:modelValue"])])]),m(y).props.settings.track_weight==1&&t.track_weight==1?(o(),j($,{key:0,type:"number",modelValue:n.weight,"onUpdate:modelValue":_=>n.weight=_,label:e.$t("Weight"),class:"mt-4 w-full sm:w-1/3"},null,8,["modelValue","onUpdate:modelValue","label"])):p("",!0)])]))),128)):(o(),l("div",Pe,[s("div",We,[c($,{label:e.$t("Quantity"),type:"number",modelValue:t.quantity,"onUpdate:modelValue":n=>t.quantity=n,class:"w-1/2"},null,8,["label","modelValue","onUpdate:modelValue"]),s("div",Be,[c(D,{label:e.$t("Unit"),modelValue:t.unit_id,"onUpdate:modelValue":n=>t.unit_id=n,class:"w-full"},{default:w(()=>[s("option",{value:t.unit.id},r(t.unit.name),9,Re),t.unit.subunits&&t.unit.subunits.length?(o(!0),l(b,{key:0},U(t.unit.subunits,n=>(o(),l("option",{key:n.id,value:n.id},r(n.name),9,Ee))),128)):p("",!0)]),_:2},1032,["label","modelValue","onUpdate:modelValue"])])]),m(y).props.settings.track_weight==1&&t.track_weight==1?(o(),j($,{key:0,type:"number",label:e.$t("Weight"),modelValue:t.weight,"onUpdate:modelValue":n=>t.weight=n,class:"mt-4 w-full sm:w-1/3"},null,8,["label","modelValue","onUpdate:modelValue"])):p("",!0)])),s("div",Ne,[e.$page.props.errors["items."+i+".variation_id"]?(o(),l("div",He,r(e.$page.props.errors["items."+i+".variation_id"].split("when").shift())+". ",1)):p("",!0),e.$page.props.errors["items."+i+".quantity"]?(o(),l("div",Oe,r(e.$page.props.errors["items."+i+".quantity"]),1)):p("",!0),e.$page.props.errors["items."+i+".weight"]?(o(),l("div",Qe,r(e.$page.props.errors["items."+i+".weight"].split("when").shift())+". ",1)):p("",!0)])],2))),128))]))])):(o(),l("div",Je,[s("table",Ye,[s("thead",null,[s("tr",Ge,[s("th",Ke,[c(v,{name:"trash"})]),s("th",Xe,r(e.$t("Item")),1),s("th",{class:q(["px-2 lg:px-6 py-4 text-center",m(y).props.settings.track_weight?"w-32 xl:w-56":"w-px"])},[m(y).props.settings.track_weight?(o(),l("span",Ze,r(e.$t("Weight")),1)):p("",!0)],2),s("th",et,r(e.$t("Quantity")),1),s("th",tt,r(e.$t("Unit")),1)])]),m(u).items.length?(o(!0),l(b,{key:0},U(m(u).items,(t,i)=>(o(),l(b,{key:t.id},[t.selected&&t.selected.variations&&t.selected.variations.length?(o(),l("tbody",st,[s("tr",{class:q(["group-hover:bg-gray-100 focus-within:bg-gray-100",{error:e.$page.props.errors["items."+i+".variation_id"]||e.$page.props.errors["items."+i+".quantity"]||e.$page.props.errors["items."+i+".weight"]}])},[a[8]||(a[8]=s("td",{class:"border-t"},[s("div",{class:"px-2 lg:pl-6 pb-2 focus:text-indigo-500"})],-1)),s("td",ot,[s("div",lt,[s("h4",rt,[s("span",at,r(t.name)+" ("+r(t.code)+")",1)])])])],2),(o(!0),l(b,null,U(t.selected.variations,(n,_)=>(o(),l("tr",{key:n.id,class:q(["group-hover:bg-gray-100 focus-within:bg-gray-100",{error:e.$page.props.errors["items."+i+".variation_id"]||e.$page.props.errors["items."+i+".quantity"]||e.$page.props.errors["items."+i+".weight"]}])},[s("td",null,[s("div",it,[s("button",{type:"button",onClick:k=>R(t,i,_),class:"text-red-400 hover:text-red-600 w-5 h-5 flex items-center justify-center"},[c(v,{name:"trash"})],8,nt)])]),s("td",null,[s("div",dt,[s("div",{innerHTML:e.$meta(n.meta)},null,8,ut)])]),s("td",null,[m(y).props.settings.track_weight==1&&t.track_weight==1?(o(),l("div",pt,[c($,{type:"number",modelValue:n.weight,"onUpdate:modelValue":k=>n.weight=k,size:"small",class:"w-full block"},null,8,["modelValue","onUpdate:modelValue"])])):p("",!0)]),s("td",null,[s("div",ct,[c($,{type:"number",modelValue:n.quantity,"onUpdate:modelValue":k=>n.quantity=k,size:"small",class:"w-full block"},null,8,["modelValue","onUpdate:modelValue"])])]),s("td",null,[t.unit?(o(),l("div",mt,[c(D,{modelValue:n.unit_id,"onUpdate:modelValue":k=>n.unit_id=k,size:"small",class:"w-full block"},{default:w(()=>[s("option",{value:t.unit.id},r(t.unit.name),9,ht),t.unit.subunits&&t.unit.subunits.length?(o(!0),l(b,{key:0},U(t.unit.subunits,k=>(o(),l("option",{key:k.id,value:k.id},r(k.name),9,gt))),128)):p("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue"])])):p("",!0)])],2))),128)),e.$page.props.errors["items."+i+".variation_id"]||e.$page.props.errors["items."+i+".quantity"]||e.$page.props.errors["items."+i+".weight"]?(o(),l("tr",{key:0,class:q(["group-hover:bg-gray-100 focus-within:bg-gray-100",{error:e.$page.props.errors["items."+i+".variation_id"]||e.$page.props.errors["items."+i+".quantity"]||e.$page.props.errors["items."+i+".weight"]}])},[a[9]||(a[9]=s("td",null,[s("div",{class:"px-2 lg:pl-6 pb-2 focus:text-indigo-500"})],-1)),s("td",ft,[s("div",yt,[e.$page.props.errors["items."+i+".variation_id"]?(o(),l("div",vt,r(e.$page.props.errors["items."+i+".variation_id"].split("when").shift())+". ",1)):p("",!0),e.$page.props.errors["items."+i+".quantity"]?(o(),l("div",wt,r(e.$page.props.errors["items."+i+".quantity"]),1)):p("",!0),e.$page.props.errors["items."+i+".weight"]?(o(),l("div",bt,r(e.$page.props.errors["items."+i+".weight"].split("when").shift())+". ",1)):p("",!0)])])],2)):p("",!0)])):(o(),l("tbody",_t,[s("tr",{class:q(["hover:bg-gray-100 focus-within:bg-gray-100",{error:e.$page.props.errors["items."+i+".variation_id"]||e.$page.props.errors["items."+i+".quantity"]||e.$page.props.errors["items."+i+".weight"]}])},[s("td",$t,[s("div",kt,[s("button",{type:"button",onClick:n=>R(t,i),class:"text-red-400 hover:text-red-600 w-5 h-5 flex items-center justify-center"},[c(v,{name:"trash"})],8,Vt)])]),s("td",xt,[s("div",qt,[s("h4",Ut,[s("span",jt,r(t.name)+" ("+r(t.code)+")",1)]),e.$page.props.errors["items."+i+".variation_id"]?(o(),l("div",At,r(e.$page.props.errors["items."+i+".variation_id"].split("when").shift())+". ",1)):p("",!0),e.$page.props.errors["items."+i+".quantity"]?(o(),l("div",St,r(e.$page.props.errors["items."+i+".quantity"]),1)):p("",!0),e.$page.props.errors["items."+i+".weight"]?(o(),l("div",Tt,r(e.$page.props.errors["items."+i+".weight"].split("when").shift())+". ",1)):p("",!0)])]),s("td",Ct,[m(y).props.settings.track_weight==1&&t.track_weight==1?(o(),l("div",Dt,[c($,{type:"number",modelValue:t.weight,"onUpdate:modelValue":n=>t.weight=n,size:"small",class:"w-full block"},null,8,["modelValue","onUpdate:modelValue"])])):p("",!0)]),s("td",Ft,[s("div",zt,[c($,{type:"number",modelValue:t.quantity,"onUpdate:modelValue":n=>t.quantity=n,size:"small",class:"w-full block"},null,8,["modelValue","onUpdate:modelValue"])])]),s("td",Lt,[t.unit?(o(),l("div",Mt,[c(D,{modelValue:t.unit_id,"onUpdate:modelValue":n=>t.unit_id=n,size:"small",class:"w-full block"},{default:w(()=>[s("option",{value:t.unit.id},r(t.unit.name),9,It),t.unit.subunits&&t.unit.subunits.length?(o(!0),l(b,{key:0},U(t.unit.subunits,n=>(o(),l("option",{key:n.id,value:n.id},r(n.name),9,Pt))),128)):p("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue"])])):p("",!0)])],2)]))],64))),128)):p("",!0),m(u).items.length===0?(o(),l("tbody",Wt,[s("tr",null,[s("td",{class:q(["border-t px-2 lg:px-6 py-4",{"bg-red-100 border-red-600":e.$page.props.errors.items}]),colspan:"5"},[x(r(e.$t("Add item to the list by search or scan barcode"))+" ",1),e.$page.props.errors.items?(o(),l("div",Bt,r(e.$page.props.errors.items),1)):p("",!0)],2)])])):p("",!0)])]))]),s("div",null,[s("label",Rt,r(e.$t("Attachments")),1),g.edit&&g.edit.attachments&&g.edit.attachments.length?(o(),l("div",Et,[s("ul",Nt,[(o(!0),l(b,null,U(g.edit.attachments,t=>(o(),l("li",{key:t.id,class:"pl-3 pr-4 py-3 flex items-center justify-between text-sm"},[s("div",Ht,[c(v,{name:"clip",class:"shrink-0 h-5 w-5 text-gray-400"}),s("span",Ot,r(t.title),1)]),s("div",Qt,[s("a",{class:"font-medium text-indigo-600 hover:text-indigo-500",href:e.route("media.download",t.id)},r(e.$t("Download")),9,Jt),s("button",{class:"font-medium text-red-600 hover:text-red-500",onClick:i=>re(t.id)},r(e.$t("Delete")),9,Yt)])]))),128))])])):p("",!0),s("div",{class:q([e.$page.props.errors.excel?"border-red-500":"border-gray-300","mt-1 flex justify-center px-6 py-3 border-2 border-dashed rounded-md"])},[s("div",Gt,[s("div",Kt,[s("label",Xt,[S.value.length?(o(),l("span",Zt,r(e.$t("Add more files")),1)):(o(),l("span",es,r(e.$t("Select files")),1)),s("input",{multiple:"",ref_key:"file",ref:F,type:"file",class:"sr-only",id:"file-upload",name:"file-upload",onChange:Y,accept:".png,.jpg,.jpeg,.pdf,.doc,.docx,.xls,.xlsx,.zip"},null,544)]),s("p",ts,r(e.$t("or drag and drop")),1)]),s("div",ss,[s("div",null,r(e.$t("You can select .png, .jpg, .pdf, .docx, .xlsx & .zip files.")),1)]),S.value.length?(o(),l("div",os,[s("div",ls,[x(r(e.$t("Selected Files"))+": ",1),(o(!0),l(b,null,U(S.value,(t,i)=>(o(),l("div",{class:"text-left",key:i},r(i+1)+". "+r(t),1))),128))])])):p("",!0),e.$page.props.errors.excel?(o(),l("div",rs,r(e.$page.props.errors.files),1)):p("",!0)])],2)]),c(be,{modelValue:m(u).details,"onUpdate:modelValue":a[4]||(a[4]=t=>m(u).details=t),error:e.$page.props.errors.details,label:e.$t("Details")},null,8,["modelValue","error","label"]),s("div",null,[!g.edit||g.edit.draft==1?(o(),j(ye,{key:0,id:"draft",class:"mb-2",checked:m(u).draft,"onUpdate:checked":a[5]||(a[5]=t=>m(u).draft=t),error:e.$page.props.errors.draft,label:e.$t("This record is draft")},null,8,["checked","error","label"])):p("",!0)])])]),actions:w(()=>[s("div",as,[g.edit?(o(),l(b,{key:0},[g.edit.deleted_at?(o(),l("button",{key:1,type:"button",onClick:se,class:"text-red-600 px-4 py-2 rounded-sm border-2 border-transparent hover:border-gray-300 focus:outline-hidden focus:border-gray-300"},r(e.$t("delete_x",{x:e.$t("Permanently")})),1)):(o(),l("button",{key:0,type:"button",onClick:K,class:"text-red-600 px-4 py-2 rounded-sm border-2 border-transparent hover:border-gray-300 focus:outline-hidden focus:border-gray-300"},r(e.$t("delete_x",{x:e.$t("Adjustment")})),1))],64)):(o(),l("div",is)),s("div",ns,[c(ke,{on:m(u).recentlySuccessful,class:"mx-3"},{default:w(()=>[x(r(e.$t("Saved.")),1)]),_:1},8,["on"]),c(we,{type:"submit",loading:m(u).processing,disabled:m(u).processing},{default:w(()=>[x(r(e.$t("Save")),1)]),_:1},8,["loading","disabled"])])])]),_:1}),A.value?(o(),j(me,{key:0,show:A.value,nf:C.value,onSelected:Q,onClose:a[6]||(a[6]=t=>A.value=!1),variants:f.value.variants},null,8,["show","nf","variants"])):p("",!0),c(I,{"max-width":"md",show:L.value,"action-type":"delete",title:"Delete Adjustment?",close:le,"action-text":"Delete Permanently",action:oe,content:`<p class='mb-2'>${e.$t("Are you sure you want to delete the record permanently?")}</p>
        <p>${e.$t("Once deleted, all of its resources and data will be permanently deleted.")}</p>`},null,8,["show","content"]),c(I,{show:z.value,close:M,action:X,"action-type":"delete",title:"Delete Adjustment?","action-text":"Delete Adjustment",content:e.$t("Are you sure you want to delete the record?")},null,8,["show","content"]),c(I,{show:T.value,action:ee,title:"Restore Adjustment!",close:te,"action-text":"Restore Adjustment",content:e.$t("Are you sure you want to restore the record?")},null,8,["show","content"])]),_:1},8,["title"])}}};export{Ms as default};
