import{D as j}from"./Dialog-Dk4S7JDy.js";import{C as E}from"./CheckBox-BvIjEx6v.js";import{F as B}from"./FileInput-DnWFVuur.js";import{T as L}from"./TextInput-DMi2dCla.js";import{S as R}from"./SelectInput-BdLKWJYF.js";import{A as F}from"./AdminLayout-CZVbxH_w.js";import{_ as O}from"./AutoComplete-DCdUm1YR.js";import{L as W}from"./LoadingButton-DJovEPtR.js";import{T as z}from"./TextareaInput-DH2izHKc.js";import{T as K}from"./DialogModal-sgVcSADN.js";import{T as Q}from"./TrashedMessage-CoOCaDQW.js";import{T as G}from"./FormSection-Bw8u_PxU.js";import{T as H}from"./DangerButton-Ctow7aOW.js";import{T as J}from"./SectionTitle-CsKWWg1N.js";import{T as X}from"./ActionMessage-pdJfik6o.js";import{T as Y}from"./SecondaryButton-E38dtDD9.js";import{_ as Z,r as m,d as v,o as i,e as c,g as l,b as s,c as a,F as k,t as u,h as f,a as y,T as C,i as x}from"./app-CmanO5vD.js";import"./Checkbox-DL9ICh3J.js";import"./InputError-IXNDXV76.js";import"./v4-BKrj-4V8.js";import"./Label-BFNS-ixp.js";import"./Input-Dp9i-tt6.js";import"./Modal-vEUc-xTy.js";import"./DropdownLink-DLgJUFVy.js";import"./ApplicationLogo-C9LXsB4R.js";import"./ApplicationMark-CtaHwZ2O.js";const $={props:["edit","categories","units","warehouses"],components:{Dialog:j,CheckBox:E,FileInput:B,TextInput:L,AdminLayout:F,SelectInput:R,AutoComplete:O,LoadingButton:W,TextareaInput:z,TecDialogModal:K,TecFormSection:G,TecDangerButton:H,TrashedMessage:Q,TecSectionTitle:J,TecActionMessage:X,TecSecondaryButton:Y},data(){return{photo:!1,confirm:!1,permanent:!1,restoreConf:!1,symbologies:[{value:"CODE128",label:this.$t("CODE128")},{value:"CODE39",label:this.$t("CODE39")},{value:"EAN5",label:this.$t("EAN-5")},{value:"EAN8",label:this.$t("EAN-8")},{value:"EAN13",label:this.$t("EAN-13")},{value:"UPC",label:this.$t("UPC-A")}],form:this.$inertia.form({photo:null,_method:this.edit?"put":"post",sku:this.edit?this.edit.sku:null,name:this.edit?this.edit.name:null,code:this.edit?this.edit.code:null,stock:this.edit?this.edit.stock:null,details:this.edit?this.edit.details:null,unit_id:this.edit?this.edit.unit_id:null,set_stock:this.edit?this.edit.set_stock:null,symbology:this.edit?this.edit.symbology:"code128",rack_location:this.edit?this.edit.rack_location:null,has_serials:this.edit?this.edit.has_serials==1:null,category_id:this.edit?this.edit.categories[0]?.id:null,has_variants:this.edit?this.edit.has_variants==1:null,track_weight:this.edit?this.edit.track_weight==1:null,track_quantity:this.edit?this.edit.track_quantity==1:!0,child_category_id:this.edit?this.edit.categories[1]?.id:null,alert_quantity:this.edit&&this.edit.alert_quantity?Number(this.edit.alert_quantity):null,variants:this.edit&&this.edit.variants?this.edit.variants:[{name:"",option:["",""]}],warehouses:this.warehouses.map(e=>({rack:"",warehouse_id:e.id,name:e.name}))||[]})}},created(){this.edit&&(this.form.warehouses=this.edit.stock.map(e=>({rack:e.rack_location,warehouse_id:e.warehouse_id,name:e.warehouse?.name}))),this.warehouses.map(e=>{this.form.warehouses.find(t=>t.warehouse_id==e.id)||this.form.warehouses.push({rack:"",warehouse_id:e.id,name:e.name})})},computed:{parents(){return this.categories.filter(e=>!e.parent_id)},subcategories(){return this.categories.filter(e=>e.parent_id==this.form.category_id)}},methods:{update(e){this.form.post(this.edit?this.route("items.update",this.edit.id):this.route("items.store"),{preserveScroll:!0})},destroy(){this.confirm=!0},deleteItem(){this.$inertia.delete(route("items.destroy",this.edit.id),{onSuccess:()=>this.closeModal()})},closeModal(){this.confirm=!1},restore(){this.restoreConf=!0},restoreItem(){this.$inertia.put(this.route("items.restore",this.edit.id),{onSuccess:()=>this.restoreConf=!1})},closeRestoreModal(){this.restoreConf=!1},deletePermanently(){this.permanent=!0},deleteCategoryPermanently(){this.$inertia.delete(route("items.destroy.permanently",this.edit.id),{onSuccess:()=>this.closeModal()})},closePermanentModal(){this.permanent=!1},deletePhoto(){this.$inertia.delete(route("items.deletePhoto",this.edit.id),{onSuccess:()=>{this.edit.photo=null,this.closeModal()}})}}},ee={key:0,class:"flex items-center"},te=["src"],oe={class:"flex flex-col gap-6"},re={class:"flex flex-col lg:flex-row gap-6"},se={class:"flex flex-col gap-6 w-full lg:w-1/2"},le={class:"flex flex-col gap-6 w-full lg:w-1/2"},ie={class:"flex items-end"},ne={key:0,class:"w-16 h-16 mr-4 relative group"},ae=["src"],de={class:"flex-1"},me={class:"-mt-4"},ue={class:"ml-6 text-sm text-yellow-600"},ce={key:0,class:"my-6"},he={class:"flex items-center justify-between"},pe={class:"text-lg font-bold"},fe={class:"flex flex-wrap items-start -mx-3"},ge={class:"p-4 bg-gray-100 shadow-sm rounded-md"},ye={class:"flex items-start"},be={class:"mt-6"},ke=["onClick"],_e=["onClick"],we={class:"flex flex-wrap items-start -mx-2"},ve={class:"mt-6"},Ve={class:"font-bold"},xe={class:"mt-3 grid grid-cols-1 lg:grid-cols-2 gap-6"},Ce={class:"w-full flex items-center justify-between"},Te={key:1},Ue={class:"flex items-center"};function Ie(e,t,d,Se,o,n){const T=m("Link"),U=m("trashed-message"),h=m("text-input"),_=m("auto-complete"),I=m("icons"),S=m("file-input"),D=m("textarea-input"),V=m("check-box"),P=m("tec-action-message"),A=m("loading-button"),q=m("tec-form-section"),w=m("Dialog"),M=m("admin-layout");return i(),v(M,{title:e.$t(d.edit?"edit_x":"create_x",{x:e.$t("Item")})},{default:c(()=>[l(q,{onSubmitted:n.update},{title:c(()=>[d.edit?(i(),a("div",ee,[l(T,{class:"text-blue-600 hover:text-blue-700",href:e.route("items.index")},{default:c(()=>[f(u(e.$t("Items")),1)]),_:1},8,["href"]),t[19]||(t[19]=s("span",{class:"text-blue-600 font-medium mx-2"},"/",-1)),d.edit?.photo?(i(),a("img",{key:0,class:"block w-6 h-6 rounded-full mr-2",src:d.edit.photo},null,8,te)):y("",!0),f(" "+u(d.edit.name),1)])):(i(),a(k,{key:1},[f(u(e.$t("create_x",{x:e.$t("Item")})),1)],64))]),description:c(()=>[f(u(d.edit?e.$t("Update the record by modifying the details in the form below"):e.$t("Please fill the form below to add new record.")),1)]),form:c(()=>[d.edit&&d.edit.deleted_at?(i(),v(U,{key:0,class:"mb-6",onRestore:n.restore},{default:c(()=>[f(u(e.$t("This record has been deleted.")),1)]),_:1},8,["onRestore"])):y("",!0),s("div",oe,[s("div",re,[s("div",se,[l(h,{modelValue:o.form.name,"onUpdate:modelValue":t[0]||(t[0]=r=>o.form.name=r),error:e.$page.props.errors.name,label:e.$t("Name")},null,8,["modelValue","error","label"]),l(h,{modelValue:o.form.code,"onUpdate:modelValue":t[1]||(t[1]=r=>o.form.code=r),error:e.$page.props.errors.code,label:e.$t("Code")},null,8,["modelValue","error","label"]),l(_,{json:"",id:"symbology",modelValue:o.form.symbology,"onUpdate:modelValue":t[2]||(t[2]=r=>o.form.symbology=r),suggestions:o.symbologies,label:e.$t("Barcode Symbology"),error:e.$page.props.errors.symbology},null,8,["modelValue","suggestions","label","error"]),l(h,{modelValue:o.form.sku,"onUpdate:modelValue":t[3]||(t[3]=r=>o.form.sku=r),error:e.$page.props.errors.sku,label:e.$t("SKU")},null,8,["modelValue","error","label"])]),s("div",le,[l(_,{json:"",id:"category",suggestions:n.parents,label:e.$t("Category"),modelValue:o.form.category_id,"onUpdate:modelValue":t[4]||(t[4]=r=>o.form.category_id=r),error:e.$page.props.errors.category_id},null,8,["suggestions","label","modelValue","error"]),l(C,{name:"slidedown"},{default:c(()=>[o.form.category_id&&n.subcategories.length>0?(i(),v(_,{key:0,json:"",id:"subcategory",suggestions:n.subcategories,label:e.$t("Child Category"),modelValue:o.form.child_category_id,"onUpdate:modelValue":t[5]||(t[5]=r=>o.form.child_category_id=r)},null,8,["suggestions","label","modelValue"])):y("",!0)]),_:1}),l(_,{json:"",id:"unit",label:e.$t("Unit"),suggestions:d.units,modelValue:o.form.unit_id,"onUpdate:modelValue":t[6]||(t[6]=r=>o.form.unit_id=r)},null,8,["label","suggestions","modelValue"]),l(h,{modelValue:o.form.rack_location,"onUpdate:modelValue":t[7]||(t[7]=r=>o.form.rack_location=r),error:e.$page.props.errors.rack_location,label:e.$t("Rack Location")},null,8,["modelValue","error","label"]),s("div",ie,[d.edit?.photo?(i(),a("div",ne,[s("button",{type:"button",onClick:t[8]||(t[8]=()=>o.photo=!0),class:"hidden group-hover:flex items-center rounded-sm justify-center absolute inset-1 bg-gray-900/80"},[l(I,{name:"trash",class:"shrink-0 w-6 h-6 text-red-500"})]),s("img",{src:d.edit.photo,alt:"",class:"rounded-sm w-16 h-16"},null,8,ae)])):y("",!0),s("div",de,[l(S,{modelValue:o.form.photo,"onUpdate:modelValue":t[9]||(t[9]=r=>o.form.photo=r),error:e.$page.props.errors.photo,label:e.$t("Photo")},null,8,["modelValue","error","label"])])])])]),l(D,{modelValue:o.form.details,"onUpdate:modelValue":t[10]||(t[10]=r=>o.form.details=r),error:e.$page.props.errors.details,label:e.$t("Details")},null,8,["modelValue","error","label"]),s("div",null,[l(V,{class:"mb-2",id:"track_weight",label:e.$t("Track Weight"),checked:o.form.track_weight,"onUpdate:checked":t[11]||(t[11]=r=>o.form.track_weight=r),error:e.$page.props.errors.track_weight},null,8,["label","checked","error"]),l(V,{id:"track_quantity",label:e.$t("Track Quantity"),checked:o.form.track_quantity,"onUpdate:checked":t[12]||(t[12]=r=>o.form.track_quantity=r),error:e.$page.props.errors.track_quantity},null,8,["label","checked","error"])]),l(C,{name:"slidedown"},{default:c(()=>[o.form.track_quantity?(i(),v(h,{key:0,class:"mb-6",type:"number",modelValue:o.form.alert_quantity,"onUpdate:modelValue":t[13]||(t[13]=r=>o.form.alert_quantity=r),label:e.$t("Alert on low stock of"),error:e.$page.props.errors.alert_quantity},null,8,["modelValue","label","error"])):y("",!0)]),_:1}),s("div",me,[l(V,{id:"has_variants",checked:o.form.has_variants,"onUpdate:checked":t[14]||(t[14]=r=>o.form.has_variants=r),error:e.$page.props.errors.has_variants,label:e.$t("Track Variants e.g. Size and/or Color")},null,8,["checked","error","label"]),s("p",ue,u(e.$t("Modifying variants after you have stock could result in wrong stock.")),1),o.form.has_variants==1?(i(),a("div",ce,[s("div",he,[s("h3",pe,u(e.$t("Variants")),1),s("div",null,[s("button",{type:"button",onClick:t[15]||(t[15]=r=>o.form.variants.push({name:"",option:["",""]})),class:"text-gray-100 px-4 py-3 bg-blue-600 border border-blue-600 rounded-l-md ml-4 focus:outline-hidden hover:bg-blue-700"},[...t[20]||(t[20]=[s("span",{class:"flex items-center justify-center text-lg w-4 h-4"},"+",-1)])]),s("button",{type:"button",onClick:t[16]||(t[16]=r=>o.form.variants.pop()),class:"text-gray-100 px-4 py-3 bg-blue-600 border border-blue-600 rounded-r-md focus:outline-hidden hover:bg-blue-700"},[...t[21]||(t[21]=[s("span",{class:"flex items-center justify-center text-lg w-4 h-4"},"-",-1)])])])]),s("div",fe,[(i(!0),a(k,null,x(o.form.variants,(r,p)=>(i(),a("div",{key:p,class:"mt-6 px-3 w-full lg:w-1/2"},[s("div",ge,[s("div",ye,[l(h,{class:"flex-1",modelValue:r.name,"onUpdate:modelValue":g=>r.name=g,error:o.form.errors["variants."+p+".name"],label:e.$t("Variant")+" "+(p+1)+" "+e.$t("Name")},null,8,["modelValue","onUpdate:modelValue","error","label"]),s("span",be,[s("button",{type:"button",onClick:g=>r.option.push(""),class:"mt-1 text-gray-100 px-4 py-3 bg-gray-600 border border-gray-600 rounded-l-md ml-4 focus:outline-hidden hover:bg-gray-500"},[...t[22]||(t[22]=[s("span",{class:"flex items-center justify-center text-lg w-4 h-4"},"+",-1)])],8,ke),s("button",{type:"button",onClick:g=>r.option.pop(),class:"mt-1 text-gray-100 px-4 py-3 bg-gray-600 border border-gray-600 rounded-r-md focus:outline-hidden hover:bg-gray-500"},[...t[23]||(t[23]=[s("span",{class:"flex items-center justify-center text-lg w-4 h-4"},"-",-1)])],8,_e)])]),s("div",we,[(i(!0),a(k,null,x(r.option,(g,b)=>(i(),a("div",{class:"mt-4 px-2 w-1/2",key:b},[l(h,{modelValue:r.option[b],"onUpdate:modelValue":N=>r.option[b]=N,label:e.$t("Option")+" "+(b+1),error:o.form.errors["variants."+p+".option."+b]},null,8,["modelValue","onUpdate:modelValue","label","error"])]))),128))])])]))),128))])])):y("",!0),s("div",ve,[s("div",Ve,u(e.$t("Warehouse Rack Locations")),1),s("div",xe,[(i(!0),a(k,null,x(o.form.warehouses,(r,p)=>(i(),a("div",null,[l(h,{class:"flex-1",modelValue:o.form.warehouses[p].rack,"onUpdate:modelValue":g=>o.form.warehouses[p].rack=g,error:o.form.errors["warehouses."+p+".rack"],label:e.$t("Rack Location for {x}",{x:r.name})},null,8,["modelValue","onUpdate:modelValue","error","label"])]))),256))])])])])]),actions:c(()=>[s("div",Ce,[d.edit?(i(),a(k,{key:0},[d.edit.deleted_at?(i(),a("button",{key:1,type:"button",onClick:t[18]||(t[18]=(...r)=>n.deletePermanently&&n.deletePermanently(...r)),class:"text-red-600 px-4 py-2 rounded-sm border-2 border-transparent hover:border-gray-300 focus:outline-hidden focus:border-gray-300"},u(e.$t("delete_x",{x:e.$t("Permanently")})),1)):(i(),a("button",{key:0,type:"button",onClick:t[17]||(t[17]=(...r)=>n.destroy&&n.destroy(...r)),class:"text-red-600 px-4 py-2 rounded-sm border-2 border-transparent hover:border-gray-300 focus:outline-hidden focus:border-gray-300"},u(e.$t("delete_x",{x:e.$t("Item")})),1))],64)):(i(),a("div",Te)),s("div",Ue,[l(P,{on:o.form.recentlySuccessful,class:"mx-3"},{default:c(()=>[f(u(e.$t("Saved.")),1)]),_:1},8,["on"]),l(A,{type:"submit",loading:o.form.processing,disabled:o.form.processing},{default:c(()=>[f(u(e.$t("Save")),1)]),_:1},8,["loading","disabled"])])])]),_:1},8,["onSubmitted"]),l(w,{"max-width":"md",show:o.photo,"action-type":"delete",action:n.deletePhoto,title:"Delete Item Photo?",close:()=>o.photo=!1,"action-text":"Delete Item Photo?",content:e.$t("Are you sure you want to delete the photo?")},null,8,["show","action","close","content"]),l(w,{"max-width":"md",show:o.permanent,"action-type":"delete",title:"Delete Item?",close:n.closePermanentModal,"action-text":"Delete Permanently",action:n.deleteCategoryPermanently,content:`<p class='mb-2'>${e.$t("Are you sure you want to delete the record permanently?")}</p>
        <p>${e.$t("Once deleted, all of its resources and data will be permanently deleted.")}</p>`},null,8,["show","close","action","content"]),l(w,{show:o.confirm,close:n.closeModal,action:n.deleteItem,"action-type":"delete",title:"Delete Item?","action-text":"Delete Item",content:e.$t("Are you sure you want to delete the record?")},null,8,["show","close","action","content"]),l(w,{show:o.restoreConf,action:n.restoreItem,title:"Restore Item!",close:n.closeRestoreModal,"action-text":"Restore Item",content:e.$t("Are you sure you want to restore the record?")},null,8,["show","action","close","content"])]),_:1},8,["title"])}const ot=Z($,[["render",Ie]]);export{ot as default};
